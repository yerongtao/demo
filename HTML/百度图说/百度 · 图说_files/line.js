define("echarts/chart/line",["require","../component/base","./base","zrender/shape/BrokenLine","../util/shape/Icon","../util/shape/HalfSmoothPolygon","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(require){function e(e,t,r,o,a){i.call(this,e,t,r,o,a),n.call(this),this.refresh(o)}function t(e,t,i){var n=t.x,r=t.y,a=t.width,s=t.height,l=s/2;if(t.symbol.match("empty"))e.fillStyle="#fff";t.brushType="both";var h=t.symbol.replace("empty","").toLowerCase();if(h.match("star"))l=h.replace("star","")-0||5,r-=1,h="star";else if("rectangle"===h||"arrow"===h)n+=(a-s)/2,a=s;var d="";if(h.match("image"))d=h.replace(new RegExp("^image:\\/\\/"),""),h="image",n+=Math.round((a-s)/2)-1,a=s+=2;if(h=o.prototype.iconLibrary[h]){var c=t.x,p=t.y;e.moveTo(c,p+l),e.lineTo(c+5,p+l),e.moveTo(c+t.width-5,p+l),e.lineTo(c+t.width,p+l);var u=this;h(e,{x:n+4,y:r+4,width:a-8,height:s-8,n:l,image:d},function(){u.modSelf(),i()})}else e.moveTo(n,r+l),e.lineTo(n+a,r+l)}var i=require("../component/base"),n=require("./base"),r=require("zrender/shape/BrokenLine"),o=require("../util/shape/Icon"),a=require("../util/shape/HalfSmoothPolygon");require("../component/axis"),require("../component/grid"),require("../component/dataZoom");var s=require("../config"),l=require("../util/ecData"),h=require("zrender/tool/util"),d=require("zrender/tool/color");return e.prototype={type:s.CHART_TYPE_LINE,_buildShape:function(){this.finalPLMap={},this._bulidPosition()},_buildHorizontal:function(e,t,i,n){for(var r,o,a,s,l,h,d,c,p,u,f=this.series,m=i[0][0],g=f[m],y=g.xAxisIndex,V=this.component.xAxis.getAxis(y),U={},b=0,_=t;_>b&&null!=V.getNameByIndex(b);b++){a=V.getCoordByIndex(b);for(var x=0,v=i.length;v>x;x++){r=f[i[x][0]].yAxisIndex||0,o=this.component.yAxis.getAxis(r),h=l=c=d=o.getCoord(0);for(var k=0,L=i[x].length;L>k;k++)if(m=i[x][k],g=f[m],p=g.data[b],u=null!=p?null!=p.value?p.value:p:"-",U[m]=U[m]||[],n[m]=n[m]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==u){if(u>=0)l-=k>0?o.getCoordSize(u):h-o.getCoord(u),s=l;else if(0>u)d+=k>0?o.getCoordSize(u):o.getCoord(u)-c,s=d;if(U[m].push([a,s,b,V.getNameByIndex(b),a,h]),n[m].min>u)n[m].min=u,n[m].minY=s,n[m].minX=a;if(n[m].max<u)n[m].max=u,n[m].maxY=s,n[m].maxX=a;n[m].sum+=u,n[m].counter++}else if(U[m].length>0)this.finalPLMap[m]=this.finalPLMap[m]||[],this.finalPLMap[m].push(U[m]),U[m]=[]}l=this.component.grid.getY();for(var w,x=0,v=i.length;v>x;x++)for(var k=0,L=i[x].length;L>k;k++)if(m=i[x][k],g=f[m],p=g.data[b],u=null!=p?null!=p.value?p.value:p:"-","-"==u){if(this.deepQuery([p,g,this.option],"calculable"))w=this.deepQuery([p,g],"symbolSize"),l+=2*w+5,s=l,this.shapeList.push(this._getCalculableItem(m,b,V.getNameByIndex(b),a,s,"horizontal"))}else;}for(var S in U)if(U[S].length>0)this.finalPLMap[S]=this.finalPLMap[S]||[],this.finalPLMap[S].push(U[S]),U[S]=[];this._calculMarkMapXY(n,i,"y"),this._buildBorkenLine(e,this.finalPLMap,V,"horizontal")},_buildVertical:function(e,t,i,n){for(var r,o,a,s,l,h,d,c,p,u,f=this.series,m=i[0][0],g=f[m],y=g.yAxisIndex,V=this.component.yAxis.getAxis(y),U={},b=0,_=t;_>b&&null!=V.getNameByIndex(b);b++){s=V.getCoordByIndex(b);for(var x=0,v=i.length;v>x;x++){r=f[i[x][0]].xAxisIndex||0,o=this.component.xAxis.getAxis(r),h=l=c=d=o.getCoord(0);for(var k=0,L=i[x].length;L>k;k++)if(m=i[x][k],g=f[m],p=g.data[b],u=null!=p?null!=p.value?p.value:p:"-",U[m]=U[m]||[],n[m]=n[m]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==u){if(u>=0)l+=k>0?o.getCoordSize(u):o.getCoord(u)-h,a=l;else if(0>u)d-=k>0?o.getCoordSize(u):c-o.getCoord(u),a=d;if(U[m].push([a,s,b,V.getNameByIndex(b),h,s]),n[m].min>u)n[m].min=u,n[m].minX=a,n[m].minY=s;if(n[m].max<u)n[m].max=u,n[m].maxX=a,n[m].maxY=s;n[m].sum+=u,n[m].counter++}else if(U[m].length>0)this.finalPLMap[m]=this.finalPLMap[m]||[],this.finalPLMap[m].push(U[m]),U[m]=[]}l=this.component.grid.getXend();for(var w,x=0,v=i.length;v>x;x++)for(var k=0,L=i[x].length;L>k;k++)if(m=i[x][k],g=f[m],p=g.data[b],u=null!=p?null!=p.value?p.value:p:"-","-"==u){if(this.deepQuery([p,g,this.option],"calculable"))w=this.deepQuery([p,g],"symbolSize"),l-=2*w+5,a=l,this.shapeList.push(this._getCalculableItem(m,b,V.getNameByIndex(b),a,s,"vertical"))}else;}for(var S in U)if(U[S].length>0)this.finalPLMap[S]=this.finalPLMap[S]||[],this.finalPLMap[S].push(U[S]),U[S]=[];this._calculMarkMapXY(n,i,"x"),this._buildBorkenLine(e,this.finalPLMap,V,"vertical")},_buildOther:function(e,t,i,n){for(var r,o,a=this.series,s={},l=0,h=i.length;h>l;l++)for(var d=0,c=i[l].length;c>d;d++){var p=i[l][d],u=a[p],f=u.xAxisIndex||0;r=this.component.xAxis.getAxis(f);var m=u.yAxisIndex||0;o=this.component.yAxis.getAxis(m);var g=o.getCoord(0);s[p]=s[p]||[],n[p]=n[p]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var y=0,V=u.data.length;V>y;y++){var U=u.data[y],b=null!=U?null!=U.value?U.value:U:"-";if(b instanceof Array){var _=r.getCoord(b[0]),x=o.getCoord(b[1]);if(s[p].push([_,x,y,b[0],_,g]),n[p].min0>b[0])n[p].min0=b[0],n[p].minY0=x,n[p].minX0=_;if(n[p].max0<b[0])n[p].max0=b[0],n[p].maxY0=x,n[p].maxX0=_;if(n[p].sum0+=b[0],n[p].counter0++,n[p].min1>b[1])n[p].min1=b[1],n[p].minY1=x,n[p].minX1=_;if(n[p].max1<b[1])n[p].max1=b[1],n[p].maxY1=x,n[p].maxX1=_;n[p].sum1+=b[1],n[p].counter1++}else;}}for(var v in s)if(s[v].length>0)this.finalPLMap[v]=this.finalPLMap[v]||[],this.finalPLMap[v].push(s[v]),s[v]=[];this._calculMarkMapXY(n,i,"xy"),this._buildBorkenLine(e,this.finalPLMap,r,"other")},_buildBorkenLine:function(e,t,i,n){for(var o,s="other"==n?"horizontal":n,c=this.series,p=e.length-1;p>=0;p--){var u=e[p],f=c[u],m=t[u];if(f.type===this.type&&null!=m)for(var g=this._getBbox(u,s),y=this._sIndex2ColorMap[u],V=this.query(f,"itemStyle.normal.lineStyle.width"),U=this.query(f,"itemStyle.normal.lineStyle.type"),b=this.query(f,"itemStyle.normal.lineStyle.color"),_=this.getItemStyleColor(this.query(f,"itemStyle.normal.color"),u,-1),x=null!=this.query(f,"itemStyle.normal.areaStyle"),v=this.query(f,"itemStyle.normal.areaStyle.color"),k=0,L=m.length;L>k;k++){var w=m[k],S="other"!=n&&this._isLarge(s,w);if(!S){for(var W=0,C=w.length;C>W;W++)if(o=f.data[w[W][2]],this.deepQuery([o,f,this.option],"calculable")||this.deepQuery([o,f],"showAllSymbol")||"categoryAxis"===i.type&&i.isMainAxis(w[W][2])&&"none"!=this.deepQuery([o,f],"symbol"))this.shapeList.push(this._getSymbol(u,w[W][2],w[W][3],w[W][0],w[W][1],s))}else w=this._getLargePointList(s,w);var I=new r({zlevel:this._zlevelBase,style:{miterLimit:V,pointList:w,strokeColor:b||_||y,lineWidth:V,lineType:U,smooth:this._getSmooth(f.smooth),smoothConstraint:g,shadowColor:this.query(f,"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:this.query(f,"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:this.query(f,"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:this.query(f,"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:!1,_main:!0,_seriesIndex:u,_orient:s});if(l.pack(I,c[u],u,0,k,c[u].name),this.shapeList.push(I),x){var X=new a({zlevel:this._zlevelBase,style:{miterLimit:V,pointList:h.clone(w).concat([[w[w.length-1][4],w[w.length-1][5]],[w[0][4],w[0][5]]]),brushType:"fill",smooth:this._getSmooth(f.smooth),smoothConstraint:g,color:v?v:d.alpha(y,.5)},highlightStyle:{brushType:"fill"},hoverable:!1,_main:!0,_seriesIndex:u,_orient:s});l.pack(X,c[u],u,0,k,c[u].name),this.shapeList.push(X)}}}},_getBbox:function(e,t){var i=this.component.grid.getBbox(),n=this.xMarkMap[e];if(null!=n.minX0)return[[Math.min(n.minX0,n.maxX0,n.minX1,n.maxX1),Math.min(n.minY0,n.maxY0,n.minY1,n.maxY1)],[Math.max(n.minX0,n.maxX0,n.minX1,n.maxX1),Math.max(n.minY0,n.maxY0,n.minY1,n.maxY1)]];else if("horizontal"===t)i[0][1]=Math.min(n.minY,n.maxY),i[1][1]=Math.max(n.minY,n.maxY);else i[0][0]=Math.min(n.minX,n.maxX),i[1][0]=Math.max(n.minX,n.maxX);return i},_isLarge:function(e,t){if(t.length<2)return!1;else return"horizontal"===e?Math.abs(t[0][0]-t[1][0])<.5:Math.abs(t[0][1]-t[1][1])<.5},_getLargePointList:function(e,t){var i;if("horizontal"===e)i=this.component.grid.getWidth();else i=this.component.grid.getHeight();for(var n=t.length,r=[],o=0;i>o;o++)r[o]=t[Math.floor(n/i*o)];return r},_getSmooth:function(e){if(e)return.3;else return 0},_getCalculableItem:function(e,t,i,n,r,o){var a=this.series,s=a[e].calculableHolderColor||this.ecTheme.calculableHolderColor,l=this._getSymbol(e,t,i,n,r,o);return l.style.color=s,l.style.strokeColor=s,l.rotation=[0,0],l.hoverable=!1,l.draggable=!1,l.style.text=void 0,l},_getSymbol:function(e,t,i,n,r,o){var a=this.series,s=a[e],l=s.data[t],h=this.getSymbolShape(s,e,l,t,i,n,r,this._sIndex2ShapeMap[e],this._sIndex2ColorMap[e],"#fff","vertical"===o?"horizontal":"vertical");if(h.zlevel=this._zlevelBase+1,this.deepQuery([l,s,this.option],"calculable"))this.setCalculable(h),h.draggable=!0;return h},getMarkCoord:function(e,t){var i=this.series[e],n=this.xMarkMap[e],r=this.component.xAxis.getAxis(i.xAxisIndex),o=this.component.yAxis.getAxis(i.yAxisIndex);if(t.type&&("max"===t.type||"min"===t.type||"average"===t.type)){var a=null!=t.valueIndex?t.valueIndex:null!=n.maxX0?"1":"";return[n[t.type+"X"+a],n[t.type+"Y"+a],n[t.type+"Line"+a],n[t.type+a]]}return["string"!=typeof t.xAxis&&r.getCoordByIndex?r.getCoordByIndex(t.xAxis||0):r.getCoord(t.xAxis||0),"string"!=typeof t.yAxis&&o.getCoordByIndex?o.getCoordByIndex(t.yAxis||0):o.getCoord(t.yAxis||0)]},refresh:function(e){if(e)this.option=e,this.series=e.series;this.backupShapeList(),this._buildShape()},ontooltipHover:function(e,t){for(var i,n,r=e.seriesIndex,o=e.dataIndex,a=r.length;a--;)if(i=this.finalPLMap[r[a]])for(var s=0,l=i.length;l>s;s++){n=i[s];for(var h=0,d=n.length;d>h;h++)if(o===n[h][2])t.push(this._getSymbol(r[a],n[h][2],n[h][3],n[h][0],n[h][1],"horizontal"))}},addDataAnimation:function(e){for(var t=this.series,i={},n=0,r=e.length;r>n;n++)i[e[n][0]]=e[n];for(var o,a,s,l,h,d,c,n=this.shapeList.length-1;n>=0;n--)if(h=this.shapeList[n]._seriesIndex,i[h]&&!i[h][3]){if(this.shapeList[n]._main&&this.shapeList[n].style.pointList.length>1){if(d=this.shapeList[n].style.pointList,a=Math.abs(d[0][0]-d[1][0]),l=Math.abs(d[0][1]-d[1][1]),c="horizontal"===this.shapeList[n]._orient,i[h][2]){if("half-smooth-polygon"===this.shapeList[n].type){var p=d.length;this.shapeList[n].style.pointList[p-3]=d[p-2],this.shapeList[n].style.pointList[p-3][c?0:1]=d[p-4][c?0:1],this.shapeList[n].style.pointList[p-2]=d[p-1]}this.shapeList[n].style.pointList.pop(),c?(o=a,s=0):(o=0,s=-l)}else{if(this.shapeList[n].style.pointList.shift(),"half-smooth-polygon"===this.shapeList[n].type){var u=this.shapeList[n].style.pointList.pop();c?u[0]=d[0][0]:u[1]=d[0][1],this.shapeList[n].style.pointList.push(u)}c?(o=-a,s=0):(o=0,s=l)}this.zr.modShape(this.shapeList[n].id,{style:{pointList:this.shapeList[n].style.pointList}},!0)}else if(i[h][2]&&this.shapeList[n]._dataIndex===t[h].data.length-1){this.zr.delShape(this.shapeList[n].id);continue}else if(!i[h][2]&&0===this.shapeList[n]._dataIndex){this.zr.delShape(this.shapeList[n].id);continue}this.shapeList[n].position=[0,0],this.zr.animate(this.shapeList[n].id,"").when(500,{position:[o,s]}).start()}}},o.prototype.iconLibrary.legendLineIcon=t,h.inherits(e,n),h.inherits(e,i),require("../chart").define("line",e),e}),define("echarts/util/shape/HalfSmoothPolygon",["require","zrender/shape/Base","zrender/shape/util/smoothBezier","zrender/tool/util","zrender/shape/Polygon"],function(require){function e(e){t.call(this,e)}var t=require("zrender/shape/Base"),i=require("zrender/shape/util/smoothBezier"),n=require("zrender/tool/util");return e.prototype={type:"half-smooth-polygon",buildPath:function(e,t){var n=t.pointList;if(!(n.length<2))if(t.smooth){var r=i(n.slice(0,-2),t.smooth,!1,t.smoothConstraint);e.moveTo(n[0][0],n[0][1]);for(var o,a,s,l=n.length,h=0;l-3>h;h++)o=r[2*h],a=r[2*h+1],s=n[h+1],e.bezierCurveTo(o[0],o[1],a[0],a[1],s[0],s[1]);e.lineTo(n[l-2][0],n[l-2][1]),e.lineTo(n[l-1][0],n[l-1][1]),e.lineTo(n[0][0],n[0][1])}else require("zrender/shape/Polygon").prototype.buildPath(e,t)}},n.inherits(e,t),e});